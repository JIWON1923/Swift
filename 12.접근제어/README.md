# 접근제어
- 은닉화를 구현하기 위한 핵심 기능
    - 은닉화 : 객체지향 프로그래밍 패러다임 개념 중 하나

---
    
## 접근제어
- 개념
    - 코드끼리 상호작용할 때 파일 간 또는 모듈 간 접근을 제한할 수 있는 기능
    - 코드의 상세 구현은 숨기고, 허용된 기능만 사용하는 인터페이스를 제공할 수 있다.
    
- 필요성
    - 프로그래머에게 의도한대로 코드를 작성하도록 유도하기 위해서이다.
    - 캡슐화와 은닉화를 구현하는 이유
        - 외부에서 보거나 접근하면 안 되는 코드가 있기 때문
        - 불필요한 접근으로 의도치 않은 결과를 초래하거나, 꼭 필요한 부분만 제공해야하는데, 전체 코드가 노출될 가능성이 있을 때 접근제어를 사용한다.

- 모듈과 소스파일
    - 스위프트의 접근제어는 모듈과 소스파일 기반으로 설계되어있다.
    - 모듈
        - 배포할 코드의 묶음 단위
        - 하나의 프레임워크나 라이브러리 또는 애플리케이션이 모듈 단위가 될 수 있다.
        - import 키워드를 사용해 불러온다.
    - 소스파일
        - 하나의 스위프트 소스 코드 파일
        - 보통 파일 하나에 타입 하나만 정의하나, 여러 타입(여러 클래스, 구조체, 열거형 등)이나 함수 등 많은 것을 정의하거나 구현할 수 있다.
    
## 접근 수준
    - 접근제어는 접근수준 키워드를 통해 구현할 수 있다. (Access Level)
    
    |접근수준|키워드|범위|비고|
    |---|---|---|---|
    |개방 접근수준|open|모듈 외부까지|클래스에서만 사용|
    |공개 접근수준|public|모듈 외부까지||
    |내부 접근수준|internal|모듈 내부||
    |파일외부비공개 접근수준|fileprivate|파일 내부||
    |비공개 접근수준|private|기능 정의 내부||
    
    ---
    
    - 공개 접근 수준 (public)
        - 어디서든 쓰일 수 있다.
        - 주로 프레임워크에서 외부와 연결될 인터페이스를 구현하는데 많이 쓰인다.
    
    - 개방 접근 수준(open)
        - 공개 접근수준 이상으로 높은 접근수준이며, 클래스와 클래스의 멤버에서 사용할 수 있다.
        - 기본적으로 공개 접근 수준과 비슷하지만, 몇몇 차이점이 존재한다.
            - 개방 접근수준을 제외한 다른 모든 접근수준의 클래스는 그 클래스가 정의된 모듈 안에서만 상속할 수 있다.
            - 개방 접근수준을 제외한 다른 모든 접근 수준의 클래스 멤버는 해당 멤버가 정의된 모듈 안에서만 재정의할 수 있다.
            - 개방 접근수준의 클래스는 그 클래스가 정의된 모듈 밖의 다른 모듈에서도 상속할 수 있다.
            - 개방 접근수준의 클래스 멤버는 해당 멤버가 정의된 모듈 밖의 다른 모듈에서도 재정의할 수 있다.
        - 개방 접근수준으로 명시하는 것은, 그 클래스를 다른 모듈에서도 부모클래스로 사용하겠다는 목적으로 클래스를 설계하고 코드를 작성했음을 의미한다.
    
    - 내부 접근수준 (internal)
        - 기본적으로 모든 요소에 암묵적으로 지정하는 **기본 접근수준**
        - 소스파일이 속해 있는 모듈 어디에서든 쓰일 수 있으나, 그 모듈을 사용하는 외부 모듈에서는 접근할 수 없다.
        - 보통 외부에서 사용할 클래스나 구조체가 아니고, 모듈 내부에서 광역적으로 사용할 경우 내부 접근수준을 지정한다.
        
    - 파일외부비공개 접근수준(fileprivate)
        - 지정된 요소는 그 요소가 구현된 소스파일 내부에서만 사용할 수 있다.
        - 해당 소스파일 외부에서 값이 변경되거나 함수를 호출하면 부작용이 생길 수 있는 경우에 사용하면 좋다.
        
    - 비공개 접근수준(private)
        - 가장 한정적인 범위로 기능을 정의하고 구현한 범위 내에서만 사용가능하다.
        - 같은 소스파일 안에 구현한 다른 타입이나 기능에서도 사용할 수 없다.
        
        
---

## 접근제어 구현 참고
    - 모든 타입에 적용되는 접근 수준의 규칙
        - 상위 요소보다 하위 요소가 더 높은 접근수준을 가질 수 없다.
        - 함수의 매개변수로 특정 접근수준이 부여된 타입이 전달되거나 반환된다면, 그 타입의 접근수준보다 함수의 접근수준이 높게 설정될 수 없다.
        - 열거형 내부의 각 case별 따로 접근수준을 부여할 수 없다.
            - case 접근수준은 열거형 자체의 접근수준을 따른다.
            - 열거형의 원시 값 타입으로 열거형의 접근수준보다 낮은 접근수준의 타입이 올 수 없다.
            - 연관 값 타입도 마찬가지이다.

---
## private, fileprivate
    - fileprivate
        - 같은 파일이면, 어떤 코드에서도 접근할 수 있다.
    - private
        - 같은 파일 내부에 다른 타입의 코드가 있더라도 접근이 불가능하다.
        - 익스텐션 코드가 같은 파일에 존재하면, 접근할 수 있다.

---
## 읽기 전용 구현
    - 설정자만 더 낮은 수준을 갖도록 제한한다.
    - [접근수준](set)처럼 표현하면, 설정자의 접근수준만 더 낮도록 지정할 수 있다.
    - 설정자 접근수준 제한은 프로퍼티, 서브스크립트, 변수 등에 적용할 수 있으며, 해당 요소의 접근수준보다 같거나 낮은 수준으로 제한해주어야한다.
